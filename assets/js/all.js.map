{"version":3,"sources":["all.js"],"names":["inputSearch","document","querySelector","searchClick","changeClick","showChangeClick","selectMenu","typeButton","displayCard","inputData","zipCodeMap","test","console","log","seltTypeData","searchKeyWord","value","searchProcess","clickTypeData","event","target","nodeName","cheangProcess","taipeiZipCode","randomZipcode","length","randomNumber","Math","ceil","random","indexOf","push","content","forEach","item","axios","get","headers","getAuthorizationHeader","then","response","data","Picture","PictureUrl1","Name","ZipCode","OpenTime","innerHTML","error","randerData","AppID","AppKey","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","HMAC","getHMAC","Authorization","showDataProcess","responseData","index","DescriptionDetail","changeClickProcess","e","preventDefault","addEventListener","swiper","Swiper","slidesPerView","freeMode","watchSlidesProgress","spaceBetween","autoplay","stopOnLastSlide","disableOnInteraction","pagination","el","breakpoints","mybutton","getElementById","window","onscroll","scrollFunction","body","scrollTop","documentElement","style","display","topFunction"],"mappings":"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","file":"all.js","sourcesContent":["//DOM\r\nconst inputSearch = document.querySelector('.inputSearch');\r\nconst searchClick = document.querySelector('.searchClick');\r\nconst changeClick = document.querySelector('.changeClick');\r\nconst showChangeClick = document.querySelector('.showChangeClick');\r\nconst selectMenu = document.querySelector('.selectMenu');\r\nconst typeButton = document.querySelector('.typeButton');\r\nconst displayCard = document.querySelector('.displayCard'); \r\n//全域變數\r\nlet inputData = '';\r\nconst zipCodeMap = {\r\n  100: '中正區',\r\n  103: '大同區',\r\n  104: '中山區',\r\n  105: '松山區',\r\n  106: '大安區',\r\n  108: '萬華區',\r\n  110: '信義區',\r\n  111: '士林區',\r\n  112: '北投區',\r\n  114: '內湖區',\r\n  115: '南港區',\r\n  116: '文山區',\r\n}\r\n//class的分類[\"遊憩類\",\"自然風景類\",\"溫泉類\",\"都會公園類\",\"體育健身類\",\"藝術類\",\"其他\"]\r\n//取得資料\r\nfunction test() {\r\n  console.log('test')\r\n}\r\n// function getInputData() {\r\n//   if (inputSearch.value === '') {\r\n//     alert('輸入到空白，請重新輸入')\r\n//   }\r\n//   else {\r\n//     inputData = inputSearch.value;\r\n//   }\r\n//   inputSearch.value = '';\r\n// }\r\n//選擇類別\r\nfunction seltTypeData() {\r\n  let searchKeyWord = '';\r\n  if(selectMenu.value==='熱門景點'){\r\n    searchKeyWord =`contains(DescriptionDetail,'熱門')`;\r\n  }\r\n  else{\r\n    searchKeyWord =`Class1 eq '${selectMenu.value}' or Class2 eq '${selectMenu.value}' or Class3 eq '${selectMenu.value}'`;\r\n  }\r\n  \r\n\r\n  searchProcess(searchKeyWord)\r\n}\r\n//按鈕類別\r\nfunction clickTypeData() {\r\n  if (event.target.nodeName === 'BUTTON') {\r\n\r\n    let searchKeyWord = '';\r\n    if(event.target.value==='熱門景點'){\r\n      searchKeyWord =`contains(DescriptionDetail,'熱門')`;\r\n    }\r\n    else{\r\n      searchKeyWord =`Class1 eq '${event.target.value}' or Class2 eq '${event.target.value}' or Class3 eq '${event.target.value}'`;\r\n    }\r\n    searchProcess(searchKeyWord)\r\n  }\r\n  else {\r\n    return\r\n  }\r\n}\r\n//換一組功能\r\nfunction cheangProcess() {\r\n  const taipeiZipCode = [100, 103, 104, 105, 106, 108, 110, 111, 112, 114, 115, 116];\r\n  let randomZipcode = [];\r\n  //把隨機的zipcod寫入randomZipcode\r\n  while (randomZipcode.length < 4) {\r\n    let randomNumber = Math.ceil(Math.random() * 12) - 1;\r\n    if (randomZipcode.indexOf(taipeiZipCode[randomNumber]) == -1) {\r\n      randomZipcode.push(taipeiZipCode[randomNumber])\r\n    }\r\n  }\r\n  // console.log(randomZipcode)\r\n  let content = '';\r\n\r\n  randomZipcode.forEach(function (item) {\r\n\r\n    axios.get(`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/Taipei?$filter=contains(ZipCode,'${item}')&$top=1&$format=JSON`\r\n      ,\r\n      {\r\n        headers: getAuthorizationHeader()\r\n      }\r\n    )\r\n      .then(function (response) {\r\n        //渲染資料\r\n\r\n        content += `<li class=\"swiper-slide\">\r\n        <a href=\"#\">\r\n          <img class=\"single-rounded-1 pe-md-7 bg-primary\" src=\"${response.data[0].Picture.PictureUrl1}\" alt=\"${response.data[0].Name}\">\r\n          <h3 class=\"text-secondary mt-2\">${response.data[0].Name}</h3>\r\n        <i class=\"fas fa-map-marker-alt text-secondary\"><span class=\"ps-1 text-tertiary\">${zipCodeMap[response.data[0].ZipCode]}｜${response.data[0].OpenTime}</span></i>\r\n        </a>\r\n      </li>`\r\n        showChangeClick.innerHTML = content;\r\n        //console.log(content)\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n\r\n  })\r\n}\r\n//把取道的值組字串並撈回資料\r\nfunction searchProcess(searchKeyWord) {\r\n\r\n  axios.get(`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/Taipei?$filter=${searchKeyWord}&$top=1000&$format=JSON`\r\n    ,\r\n    {\r\n      headers: getAuthorizationHeader()\r\n    }\r\n  )\r\n    .then(function (response) {\r\n      //data = response.data;\r\n      console.log('有撈到資料')\r\n      //渲染資料\r\n      randerData(response.data)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n}\r\n//授權碼記得要用在axios內\r\nfunction getAuthorizationHeader() {\r\n  //  填入自己 ID、KEY 開始\r\n  let AppID = '72eedea956be46d0882b168d7657e9a1';\r\n  let AppKey = 'CIqfhH-bYTVI-lzBqts5tjvp9P8';\r\n  //  填入自己 ID、KEY 結束\r\n  let GMTString = new Date().toGMTString();\r\n  let ShaObj = new jsSHA('SHA-1', 'TEXT');\r\n  ShaObj.setHMACKey(AppKey, 'TEXT');\r\n  ShaObj.update('x-date: ' + GMTString);\r\n  let HMAC = ShaObj.getHMAC('B64');\r\n  let Authorization = 'hmac username=\\\"' + AppID + '\\\", algorithm=\\\"hmac-sha1\\\", headers=\\\"x-date\\\", signature=\\\"' + HMAC + '\\\"';\r\n  return { 'Authorization': Authorization, 'X-Date': GMTString };\r\n}\r\n//顯示資料\r\nfunction showDataProcess(responseData) {\r\n  let content = ''\r\n  responseData.forEach((item, index) => {\r\n    content += `<div class=\"col-12 col-md-6 col-lg-3\">\r\n    <div class=\"card bg-transparent border-0 mb-5\">\r\n      <div class=\" single-rounded-8 single-rounded-lg-6 mb-2 card-box-shadow\">\r\n        <img src=\"${item.Picture.PictureUrl1}\"\r\n          class=\"card-img-top single-rounded-8 single-rounded-lg-6 w-100 bg-primary\" alt=\"...\">\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <h3 class=\"card-title mb-2 fs-lg-4\">${item.Name}</h3>\r\n        <p class=\"card-text mb-4 mb-lg-2 text-light-gray fs-lg-4 ellipsis5\">\r\n          ${item.DescriptionDetail}\r\n        </p>\r\n        <a href=\"#\" class=\"text-success stretched-link\"># 熱門景點</a>\r\n      </div>\r\n    </div>\r\n  </div> `\r\n  })\r\n  displayCard.innerHTML = content\r\n}\r\n//渲染資料\r\nfunction randerData(responseData) {\r\n  showDataProcess(responseData)\r\n}\r\n\r\n\r\n//功能執行\r\n\r\n//點擊換一組功能\r\nfunction changeClickProcess(e) {\r\n  e.preventDefault();\r\n  cheangProcess()\r\n}\r\n//監控\r\n\r\n//searchClick.addEventListener('click', serachButtonClick, false)\r\nchangeClick.addEventListener('click', changeClickProcess, false);\r\nselectMenu.addEventListener('change', seltTypeData, false);\r\ntypeButton.addEventListener('click', clickTypeData, false);\r\n//開啟網頁後執行\r\ncheangProcess()\r\n\r\n//套件\r\nconst swiper = new Swiper('.siteSwiper', {\r\n\r\n  slidesPerView: 1.3,\r\n  freeMode: true,\r\n  watchSlidesProgress: true,\r\n\r\n  spaceBetween: 20,\r\n  autoplay: {\r\n    // delay: 2500,\r\n    stopOnLastSlide: false,\r\n    disableOnInteraction: true,\r\n  },\r\n  pagination: {\r\n    el: \".swiper-pagination\",\r\n  },\r\n\r\n  breakpoints: {\r\n    576: {\r\n      slidesPerView: 2.8,\r\n      spaceBetween: 20\r\n    },\r\n    992: {\r\n      slidesPerView: 2.5,\r\n      spaceBetween: 20\r\n    }\r\n\r\n  }\r\n})\r\n\r\n// footer 的 go to top button:\r\nconst mybutton = document.getElementById(\"goTopBtn\");\r\n\r\n// When the user scrolls down 20px from the top of the document, show the button\r\nwindow.onscroll = function () { scrollFunction() };\r\n\r\nfunction scrollFunction() {\r\n  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\r\n    mybutton.style.display = \"block\";\r\n  } else {\r\n    mybutton.style.display = \"none\";\r\n  }\r\n}\r\n\r\n// When the user clicks on the button, scroll to the top of the document\r\nfunction topFunction() {\r\n  document.body.scrollTop = 0; // For Safari\r\n  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\r\n}"]}